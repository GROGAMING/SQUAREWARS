<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SQUARE WARS</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Full-screen Main Menu Screen -->
    <div id="mainMenuScreen" class="menu-screen" aria-hidden="false">
      <div class="menu-wrap">
        <h1 class="menu-title">SQUARE WARS</h1>
        <div class="menu-actions">
          <button class="menu-primary" onclick="openModeSelect()">Choose Game Mode</button>
          <button class="menu-secondary" onclick="openTutorial()">Tutorial</button>
          <button class="menu-secondary" onclick="openSettings()">Settings</button>
        </div>
        <div class="menu-tutorial">
          <button class="menu-back" onclick="closeTutorial()">← Back</button>
          <h3>Tutorial</h3>
          <p id="tutorialContent"></p>
        </div>
      </div>
    </div>
    <!-- Mode Select Screen (full-screen) -->
    <div id="modeSelectModal" class="menu-screen hidden" aria-hidden="true">
      <div class="menu-wrap">
        <button class="menu-back" onclick="menuBack()">← Back</button>
        <h2>Choose Game Mode</h2>
        <p>Select how you want to play SQUARE WARS:</p>
        <button class="single-player" onclick="setGameMode('single')">
          Single Player<br /><small>vs Computer</small>
        </button>
        <button onclick="setGameMode('multi')">
          Multiplayer<br /><small>2 Players</small>
        </button>
      </div>
    </div>

    <!-- Settings Screen (full-screen) -->
    <div id="settingsScreen" class="menu-screen hidden" aria-hidden="true">
      <div class="menu-wrap">
        <button class="menu-back" onclick="closeSettings()">← Back</button>
        <h2>Settings</h2>
        <div class="settings-group">
          <label><strong>Control Mode</strong></label>
          <div class="settings-row">
            <label><input type="radio" name="controlMode" id="cmTouch" value="touch" /> Touch Controls</label>
            <label><input type="radio" name="controlMode" id="cmButtons" value="buttons" /> Button Controls</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Scoring Select Screen (full-screen) -->
    <div id="scoringSelectModal" class="menu-screen hidden" aria-hidden="true">
      <div class="menu-wrap">
        <button class="menu-back" onclick="menuBack()">← Back</button>
        <h2>Choose Scoring Style</h2>

        <button class="classic-mode" onclick="setScoringMode('classic')">
          Classic (Box Points)<br />
          <small>Each captured box is worth <strong>1 point</strong>.</small>
        </button>

        <button class="area-mode" onclick="setScoringMode('area')">
          Territory Takedown (Area Mode)<br />
          <small
            >Score the <strong>number of squares</strong> inside a captured
            zone. Overlaps can <strong>steal</strong> territory!</small
          >
        </button>

        <!-- Quick Fire goes to its own screen -->
        <button class="quickfire-mode" onclick="setScoringMode('quickfire')">
          Quick Fire<br />
          <small>Classic scoring with a win target.</small>
        </button>
      </div>
    </div>

    <!-- Quick Fire target Screen (full-screen) -->
    <div id="quickfireSelectModal" class="menu-screen hidden" aria-hidden="true">
      <div class="menu-wrap">
        <h2>Quick Fire — Set Win Target</h2>
        <p>Choose how many boxes a player needs to win the match.</p>

        <div class="qf-chooser">
          <label for="qfTarget">Target</label>

          <!-- Range + live bubble -->
          <div class="qf-range-wrap">
            <div id="qfBubble" class="qf-bubble">5</div>
            <input
              type="range"
              id="qfTarget"
              min="1"
              max="10"
              step="1"
              value="5"
              oninput="onQuickfireInput(this)"
            />
          </div>
        </div>

        <div class="qf-actions">
          <button class="qf-start" onclick="confirmQuickfire()">Start</button>
          <button class="qf-cancel" onclick="backFromQuickfire()">Back</button>
        </div>
      </div>
    </div>

    <!-- Difficulty Select Screen (full-screen) -->
    <div id="difficultySelectModal" class="menu-screen hidden" aria-hidden="true">
      <div class="menu-wrap">
        <button class="menu-back" onclick="menuBack()">← Back</button>
        <h2>Choose Difficulty</h2>
        <p>Select the AI difficulty level:</p>
        <button class="beginner theme-opt" onclick="setDifficulty('beginner')">
          <span class="thumb theme-classroom" aria-hidden="true"></span>
          <span class="txt"><span class="title">Classroom</span><br /><small>Relaxed, learner-friendly mode</small></span>
        </button>
        <button class="medium theme-opt" onclick="setDifficulty('medium')">
          <span class="thumb theme-warroom" aria-hidden="true"></span>
          <span class="txt"><span class="title">War Room</span><br /><small>Tactical challenge</small></span>
        </button>
        <button class="advanced theme-opt" onclick="setDifficulty('advanced')">
          <span class="thumb theme-hitech" aria-hidden="true"></span>
          <span class="txt"><span class="title">High-Tech Command</span><br /><small>Serious strategic battle</small></span>
        </button>
        <button class="impossible theme-opt" onclick="setDifficulty('impossible')">
          <span class="thumb theme-space" aria-hidden="true"></span>
          <span class="txt"><span class="title">Space Arena</span><br /><small>Ultimate challenge</small></span>
        </button>
      </div>
    </div>

    <!-- Instructions Screen (full-screen) -->
    <div id="instructionsModal" class="menu-screen hidden" aria-hidden="true">
      <div class="menu-wrap">
        <button class="menu-back" onclick="menuBack()">← Back</button>
        <h2 id="instructionsTitle">How to Play SQUARE WARS</h2>
        <p id="instructionsBody"></p>
        <button onclick="closeInstructions()">Got it, let's play!</button>
      </div>
    </div>

    <!-- End Game Modal -->
    <div id="endGameModal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal">
        <h2 id="endGameTitle">Game Over</h2>
        <p id="endGameSubtitle">Winner: <strong>—</strong></p>
        <button id="tryAgainBtn">Try Again</button>
        <button id="changeModeBtn">Change Mode</button>
      </div>
    </div>

    <div id="gameScreen" class="hidden">
      

    <!-- In-game top bar with menu button -->
    <div class="topbar">
      <button id="menuBtn" class="menu-btn" onclick="openInGameMenu()" aria-label="Open Menu">☰</button>
    </div>

    <!-- Thin, minimal scoreboard: three compact boxes in one row -->
    <div id="thinScoreBar" class="thin-score-bar scoreboard-row" aria-label="Scores">
      <div id="redScore" class="scorebox left" role="group" aria-label="Red score">
        <span class="dot dot-red" aria-hidden="true"></span>
        <span class="name" id="thinRedLabel">Player 1</span>
        <span class="value" id="redGames">0</span>
      </div>
      <div id="modeBox" class="modebox center" aria-live="polite" aria-atomic="true">
        <span id="thinMode"></span>
      </div>
      <div id="blueScore" class="scorebox right" role="group" aria-label="Blue score">
        <span class="dot dot-blue" aria-hidden="true"></span>
        <span class="name" id="thinBlueLabel">Player 2</span>
        <span class="value" id="blueGames">0</span>
      </div>
    </div>

    <div class="desk-surface">
      <!-- Classroom props positioned on the desk surface; visible only in Classroom theme -->
      <div class="classroom-props-on-desk" aria-hidden="true">
        <img src="/images/pencil.png" class="decor-pencil" alt="Pencil" />
        <img src="/images/books.png" class="decor-books" alt="Books" />
        <img src="/images/holder.png" class="decor-holder" alt="Holder" />
      </div>
      <div class="grid-wrapper">
        <div class="grid-outer" id="gridOuter">
          <!-- Touch-friendly side controls -->
          <div id="boardControlsLeft" class="board-controls side left" aria-label="Left board controls">
            <button id="btnArrowLeft" class="ctrl-btn ctrl-arrow" type="button" aria-label="Move left">◀</button>
          </div>
          <div class="grid" id="gameGrid"></div>
          <div id="outlineLayer"></div>
          <!-- Visual-only scanning line (shown in High-Tech theme) -->
          <div class="scan-line" aria-hidden="true"></div>
          <div id="boardControlsRight" class="board-controls side right" aria-label="Right board controls">
            <button id="btnDrop" class="ctrl-btn ctrl-drop" type="button">Drop</button>
            <button id="btnArrowRight" class="ctrl-btn ctrl-arrow" type="button" aria-label="Move right">▶</button>
          </div>
        </div>
      </div>
    </div>

    <!-- In-game Options Overlay -->
    <div id="inGameMenuOverlay" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal in-game-menu">
        <h2>Menu</h2>
        <button onclick="resetGameAndCloseMenu()">Reset Game</button>
        <button onclick="openModeSelect()">Change Game Mode</button>
        <button onclick="openSettings()">Settings</button>
        <button onclick="goToMainMenu()">Main Menu</button>
        <button onclick="closeInGameMenu()">Close</button>
      </div>
    </div>
    </div>

    <script type="module" src="./js/script.js"></script>
  </body>
</html>
